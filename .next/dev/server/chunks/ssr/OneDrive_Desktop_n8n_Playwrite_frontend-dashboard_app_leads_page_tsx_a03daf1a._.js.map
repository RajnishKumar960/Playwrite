{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ASUS/OneDrive/Desktop/n8n/Playwrite/frontend-dashboard/app/leads/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { DragDropContext, Droppable, Draggable } from \"@hello-pangea/dnd\";\r\nimport {\r\n    MoreVertical, Search, Filter, Plus,\r\n    MessageSquare, Phone, Linkedin, Mail, Calendar,\r\n    AlertCircle, ChevronDown\r\n} from \"lucide-react\";\r\n\r\n// Kanban Columns\r\nconst COLUMNS = {\r\n    new: { id: \"new\", title: \"New Leads\", color: \"border-blue-500\" },\r\n    contacted: { id: \"contacted\", title: \"Contacted\", color: \"border-purple-500\" },\r\n    connected: { id: \"connected\", title: \"Connected\", color: \"border-amber-500\" },\r\n    replied: { id: \"replied\", title: \"Replied\", color: \"border-pink-500\" },\r\n    interested: { id: \"interested\", title: \"Interested\", color: \"border-green-500\" },\r\n};\r\n\r\nexport default function LeadsPage() {\r\n    const [columns, setColumns] = useState<any>(COLUMNS);\r\n    const [leads, setLeads] = useState<any>({\r\n        new: [], contacted: [], connected: [], replied: [], interested: []\r\n    });\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetchLeads();\r\n    }, []);\r\n\r\n    const fetchLeads = async () => {\r\n        try {\r\n            const res = await fetch(\"http://localhost:5000/api/leads/kanban\");\r\n            const data = await res.json();\r\n            if (data.columns) {\r\n                setLeads(data.columns);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Failed to fetch leads\", error);\r\n            // Fallback Mock Data with \"Pain Points\" analysis\r\n            setLeads({\r\n                new: [\r\n                    { id: \"101\", name: \"Alice Freeman\", company: \"TechFlow\", title: \"CTO\", status: \"new\", score: 85, painPoints: [\"Scaling Issue\", \"Hiring\"] },\r\n                    { id: \"102\", name: \"Bob Smith\", company: \"StartUp Inc\", title: \"Founder\", status: \"new\", score: 72, painPoints: [\"Cost Reduction\"] }\r\n                ],\r\n                contacted: [\r\n                    { id: \"103\", name: \"Charlie Davis\", company: \"GrowthCo\", title: \"VP Sales\", status: \"contacted\", score: 60, painPoints: [] }\r\n                ],\r\n                connected: [\r\n                    { id: \"104\", name: \"Diana Prince\", company: \"Global Corp\", title: \"Director\", status: \"connected\", score: 90, painPoints: [\"Automation\"] }\r\n                ],\r\n                replied: [\r\n                    { id: \"105\", name: \"Evan Wright\", company: \"NextLevel\", title: \"CEO\", status: \"replied\", score: 95, painPoints: [\"Lead Gen\", \"Integration\"] }\r\n                ],\r\n                interested: []\r\n            });\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const onDragEnd = (result: any) => {\r\n        const { source, destination } = result;\r\n        if (!destination) return;\r\n\r\n        if (source.droppableId === destination.droppableId && source.index === destination.index) return;\r\n\r\n        // Move logic\r\n        const sourceCol = [...leads[source.droppableId]];\r\n        const destCol = [...leads[destination.droppableId]];\r\n        const [removed] = sourceCol.splice(source.index, 1);\r\n\r\n        // Optimistic Update\r\n        removed.status = destination.droppableId;\r\n        destCol.splice(destination.index, 0, removed);\r\n\r\n        setLeads({\r\n            ...leads,\r\n            [source.droppableId]: sourceCol,\r\n            [destination.droppableId]: destCol\r\n        });\r\n\r\n        // Notify Backend (Fire & Forget)\r\n        fetch(\"http://localhost:5000/api/leads/kanban\", {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({\r\n                leadId: removed.id,\r\n                status: destination.droppableId,\r\n                column: destination.droppableId\r\n            })\r\n        }).catch(err => console.error(\"Move failed\", err));\r\n    };\r\n\r\n    return (\r\n        <div className=\"h-[calc(100vh-2rem)] flex flex-col p-6 space-y-6 overflow-hidden\">\r\n            {/* Header */}\r\n            <div className=\"flex justify-between items-center shrink-0\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold bg-clip-text text-transparent bg-linear-to-r from-purple-400 to-pink-400\">\r\n                        Leads CRM\r\n                    </h1>\r\n                    <p className=\"text-gray-400 mt-1\">Kanban board for lead tracking and engagement.</p>\r\n                </div>\r\n\r\n                <div className=\"flex gap-3\">\r\n                    <div className=\"relative\">\r\n                        <Search className=\"absolute left-3 top-2.5 text-gray-500\" size={16} />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Search leads...\"\r\n                            className=\"bg-white/5 border border-white/10 rounded-lg pl-9 pr-4 py-2 text-sm text-gray-200 focus:outline-none focus:ring-1 focus:ring-purple-500 w-64\"\r\n                        />\r\n                    </div>\r\n                    <button className=\"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg shadow-lg shadow-purple-900/20 transition-all font-medium\">\r\n                        <Plus size={18} /> Add Lead\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Kanban Board */}\r\n            <div className=\"flex-1 overflow-x-auto overflow-y-hidden pb-4\">\r\n                <DragDropContext onDragEnd={onDragEnd}>\r\n                    <div className=\"flex gap-6 h-full min-w-[1200px]\">\r\n                        {Object.values(COLUMNS).map((col: any) => (\r\n                            <div key={col.id} className=\"w-80 flex flex-col h-full rounded-2xl glass-card border border-white/5 bg-[#0f172a]/40\">\r\n                                {/* Column Header */}\r\n                                <div className={`p-4 border-b border-white/5 flex justify-between items-center ${col.id === 'new' ? 'bg-blue-500/5' : col.id === 'replied' ? 'bg-pink-500/5' : ''}`}>\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <div className={`w-3 h-3 rounded-full ${col.id === 'new' ? 'bg-blue-500' : col.id === 'replied' ? 'bg-pink-500' : 'bg-gray-500'}`} />\r\n                                        <h3 className=\"font-bold text-gray-200\">{col.title}</h3>\r\n                                        <span className=\"text-xs text-gray-500 px-2 py-0.5 bg-white/5 rounded-full\">\r\n                                            {leads[col.id]?.length || 0}\r\n                                        </span>\r\n                                    </div>\r\n                                    <MoreVertical size={16} className=\"text-gray-500 cursor-pointer hover:text-white\" />\r\n                                </div>\r\n\r\n                                {/* Droppable Area */}\r\n                                <Droppable droppableId={col.id}>\r\n                                    {(provided) => (\r\n                                        <div\r\n                                            {...provided.droppableProps}\r\n                                            ref={provided.innerRef}\r\n                                            className=\"flex-1 p-3 overflow-y-auto scrollbar-thin space-y-3\"\r\n                                        >\r\n                                            {leads[col.id]?.map((lead: any, index: number) => (\r\n                                                <Draggable key={lead.id.toString()} draggableId={lead.id.toString()} index={index}>\r\n                                                    {(provided, snapshot) => (\r\n                                                        <div\r\n                                                            ref={provided.innerRef}\r\n                                                            {...provided.draggableProps}\r\n                                                            {...provided.dragHandleProps}\r\n                                                            className={`p-4 rounded-xl border transition-all group relative overflow-hidden ${snapshot.isDragging\r\n                                                                    ? 'bg-purple-900/40 border-purple-500 shadow-2xl rotate-2 scale-105 z-50'\r\n                                                                    : 'bg-white/5 border-white/5 hover:border-white/10 hover:bg-white/10'\r\n                                                                }`}\r\n                                                        >\r\n                                                            {/* Pain Points Tags */}\r\n                                                            {lead.painPoints && lead.painPoints.length > 0 && (\r\n                                                                <div className=\"flex flex-wrap gap-1 mb-2\">\r\n                                                                    {lead.painPoints.map((pp: string) => (\r\n                                                                        <span key={pp} className=\"text-[10px] px-1.5 py-0.5 bg-red-500/10 text-red-400 border border-red-500/20 rounded\">\r\n                                                                            {pp}\r\n                                                                        </span>\r\n                                                                    ))}\r\n                                                                </div>\r\n                                                            )}\r\n\r\n                                                            <div className=\"flex justify-between items-start mb-2\">\r\n                                                                <h4 className=\"font-bold text-gray-200 text-sm group-hover:text-purple-300 transition-colors\">{lead.name}</h4>\r\n                                                                {lead.score > 80 && <AlertCircle size={14} className=\"text-amber-400\" />}\r\n                                                            </div>\r\n                                                            <p className=\"text-xs text-gray-400 mb-0.5\">{lead.title}</p>\r\n                                                            <p className=\"text-xs text-purple-400 font-medium mb-3\">{lead.company}</p>\r\n\r\n                                                            <div className=\"flex items-center justify-between pt-3 border-t border-white/5\">\r\n                                                                <div className=\"flex gap-2\">\r\n                                                                    <button className=\"p-1.5 hover:bg-white/10 rounded text-gray-400 hover:text-blue-400 transition-colors\"><Linkedin size={14} /></button>\r\n                                                                    <button className=\"p-1.5 hover:bg-white/10 rounded text-gray-400 hover:text-green-400 transition-colors\"><Mail size={14} /></button>\r\n                                                                </div>\r\n                                                                <div className=\"text-[10px] text-gray-600 font-mono\">2d ago</div>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    )}\r\n                                                </Draggable>\r\n                                            ))}\r\n                                            {provided.placeholder}\r\n                                        </div>\r\n                                    )}\r\n                                </Droppable>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </DragDropContext>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}